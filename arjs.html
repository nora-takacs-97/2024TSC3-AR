<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>2024tsc3-ar</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <!-- <link rel="icon" type="image/x-icon" href="favicon.ico"> -->
    <!-- <script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1.3.0/dist/aframe-master.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script> -->
    <script src="js/aframe-master.min.js"></script>
    <script src="js/aframe-ar-nft.js"></script>

    <style>
        .arjs-loader,
        .infoOverlay {
            height: 100%;
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .infoOverlay {
            display: none;
        }

        .arjs-loader div,
        .infoOverlay div {
            text-align: center;
            font-size: 1.25em;
            color: white;
        }
    </style>

    <script>
        window.onload = function () {
            let infoOverlay = document.querySelector('.infoOverlay');
            document.addEventListener('markerFound', function () {
                infoOverlay.style.display = 'none';
            });
            document.addEventListener('markerLost', function () {
                infoOverlay.style.display = 'flex';
            });
            window.addEventListener("arjs-nft-loaded", (event) => {
                infoOverlay.style.display = 'flex';
            });
        };


    </script>
</head>




<body style='margin : 0px; overflow: hidden;'>
    <!-- minimal loader shown until image descriptors are loaded -->
    <div class="arjs-loader">
        <div>Loading, please wait...</div>
    </div>
    <div class="infoOverlay">
        <div>Place camera within 10 cm (4 in) from QR code</div>
    </div>
    <a-scene vr-mode-ui="enabled: false;" renderer="logarithmicDepthBuffer: true; precision: medium;" embedded
        arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
        shadow="autoUpdate: true; enabled: true; type: pcfsoft">

        <a-entity position="-45 20 0">
            <a-nft type="nft" url="2024tsc3-ar/qr" smooth="true" smoothCount="10" smoothTolerance=".01"
                smoothThreshold="5">
                <a-entity
                    animation="property: rotation; from: 0 0 0; to: 0 0 360; loop: true; dur: 4000; easing: linear;"
                    position="100 80 -50">
                    <!-- Model of the asteroid -->
                    <a-entity shadow="receive: false" color="white" gltf-model="1508.glb" scale="100 100 100"
                        rotation="0 90 0" position="-20 0 0">
                    </a-entity>
                </a-entity>
                <!-- The wall behind the asteroid, where the shadow is cast -->
                <a-box id="directionaltarget" shadow="receive: true;" color="rgb(220,120,50)" position="100 0 -50"
                    rotation="270 270 270" depth="20" height="80" width="80">
                </a-box>
                <!-- The light source that casts the shadow. To make visualize, change <a-entity> to <a-box> -->
                <a-entity
                    light="type: directional; color: #AAA; target: #directionaltarget; castShadow:true; shadowBias: -0.004; shadowCameraBottom: -100; shadowCameraLeft: -100; shadowCameraTop: 100; shadowCameraRight: 100; shadowMapHeight: 2048; shadowMapWidth: 2048;"
                    position="100 100 -50" rotation="270 270 270" depth="20" height="80" width="80">
                </a-entity>
                <a-entity light="type: ambient; color: #CCC; intensity: 0.6"></a-entity>
            </a-nft>
        </a-entity>
        <a-entity camera></a-entity>
    </a-scene>
</body>

</html>
